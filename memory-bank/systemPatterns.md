# Архитектура системы и технические решения

## Общая архитектура
Проект NonIsothermicalFlow построен на основе микросервисной архитектуры с разделением на следующие основные компоненты:

1. **Фронтенд (React)**
   - SPA-приложение с компонентным подходом
   - Использование Material UI для унифицированного дизайна
   - Маршрутизация на основе React Router
   - Управление состоянием с помощью React Hooks
   - Взаимодействие с API через Axios

2. **Бэкенд (Spring Boot)**
   - REST API для взаимодействия с фронтендом
   - Многослойная архитектура (контроллеры, сервисы, репозитории)
   - Использование Spring Data JPA для работы с базами данных
   - Аутентификация и авторизация с использованием JWT
   - Валидация данных на уровне API

3. **Базы данных (PostgreSQL)**
   - База данных материалов (materials_db) для хранения данных о материалах и их свойствах
   - База данных пользователей (users_db) для хранения учетных записей и ролей

## Схема взаимодействия
```
+-----------------+       +------------------+       +------------------+
|                 |       |                  |       |                  |
|    Фронтенд     | <---> |     Бэкенд      | <---> |  Базы данных     |
|     (React)     |  HTTP |   (Spring Boot)  |  SQL  |   (PostgreSQL)   |
|                 |       |                  |       |                  |
+-----------------+       +------------------+       +------------------+
```

## Технические паттерны

### В бэкенде:
- **Repository Pattern** - абстракция слоя доступа к данным
- **Service Layer** - бизнес-логика, отделенная от контроллеров
- **DTO Pattern** - передача данных между слоями приложения
- **Dependency Injection** - внедрение зависимостей через Spring контейнер
- **Builder Pattern** - для создания сложных объектов

### В фронтенде:
- **Component-Based Architecture** - разделение UI на переиспользуемые компоненты
- **Container/Presentational Pattern** - разделение компонентов на компоненты с логикой и компоненты отображения
- **Hooks Pattern** - использование хуков React для управления состоянием
- **Routing Pattern** - навигация внутри SPA с React Router

## План докеризации
Для полной докеризации системы планируется следующая структура контейнеров:

```
+-------------------+       +------------------+       +------------------+
|                   |       |                  |       |                  |
|  Nginx контейнер  | <---> |  Spring Boot    | <---> |  PostgreSQL      |
|  (статика + прокси)|       |  контейнер      |       |  контейнеры      |
|                   |       |                  |       |                  |
+-------------------+       +------------------+       +------------------+
```

### Контейнеры:
1. **frontend-container**: Nginx с собранной статикой React приложения и проксированием API запросов
2. **backend-container**: Spring Boot приложение с JVM, оптимизированной для Docker
3. **postgres-materials-container**: PostgreSQL для хранения данных о материалах
4. **postgres-users-container**: PostgreSQL для хранения учетных данных пользователей

## Сетевое взаимодействие
- Все контейнеры будут находиться в одной Docker сети
- Nginx будет выступать в качестве обратного прокси для бэкенда
- Бэкенд будет взаимодействовать с базами данных по внутренним именам контейнеров
- Внешний доступ будет осуществляться только к контейнеру Nginx на портах 80/443 